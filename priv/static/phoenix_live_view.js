!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.phoenix_live_view=t():e.phoenix_live_view=t()}(this,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){(function(e){var n,i,r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(a,s){"object"==o(t)&&"object"==o(e)?e.exports=s():(i=[],void 0===(r="function"==typeof(n=s)?n.apply(t,i):n)||(e.exports=r))}(0,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==o(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(t){e.exports=t.Phoenix=n(2)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==("undefined"==typeof window?"undefined":o(window))&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.r(t),n.d(t,"Channel",function(){return b}),n.d(t,"Serializer",function(){return k}),n.d(t,"Socket",function(){return x}),n.d(t,"LongPoll",function(){return _}),n.d(t,"Ajax",function(){return w}),n.d(t,"Presence",function(){return j});var u="undefined"!=typeof self?self:null,l="undefined"!=typeof window?window:null,f=u||l||void 0,c={connecting:0,open:1,closing:2,closed:3},h=1e4,d={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},p={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},v=[p.close,p.error,p.join,p.reply,p.leave],g={longpoll:"longpoll",websocket:"websocket"},y=function(e){return"function"==typeof e?e:function(){return e}},m=function(){function e(t,n,i,o){r(this,e),this.channel=t,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=o,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return s(e,[{key:"resend",value:function(e){this.timeout=e,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(e){var t=e.status,n=e.response;e.ref,this.recHooks.filter(function(e){return e.status===t}).forEach(function(e){return e.callback(n)})}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var e=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(t){e.cancelRefEvent(),e.cancelTimeout(),e.receivedResp=t,e.matchReceive(t)}),this.timeoutTimer=setTimeout(function(){e.trigger("timeout",{})},this.timeout)}},{key:"hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}},{key:"trigger",value:function(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}]),e}(),b=function(){function e(t,n,i){var o=this;r(this,e),this.state=d.closed,this.topic=t,this.params=y(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new m(this,p.join,this.params,this.timeout),this.pushBuffer=[],this.rejoinTimer=new A(function(){o.socket.isConnected()&&o.rejoin()},this.socket.rejoinAfterMs),this.socket.onError(function(){return o.rejoinTimer.reset()}),this.socket.onOpen(function(){o.rejoinTimer.reset(),o.isErrored()&&o.rejoin()}),this.joinPush.receive("ok",function(){o.state=d.joined,o.rejoinTimer.reset(),o.pushBuffer.forEach(function(e){return e.send()}),o.pushBuffer=[]}),this.joinPush.receive("error",function(){o.state=d.errored,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()}),this.onClose(function(){o.rejoinTimer.reset(),o.socket.hasLogger()&&o.socket.log("channel","close ".concat(o.topic," ").concat(o.joinRef())),o.state=d.closed,o.socket.remove(o)}),this.onError(function(e){o.socket.hasLogger()&&o.socket.log("channel","error ".concat(o.topic),e),o.isJoining()&&o.joinPush.reset(),o.state=d.errored,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",function(){o.socket.hasLogger()&&o.socket.log("channel","timeout ".concat(o.topic," (").concat(o.joinRef(),")"),o.joinPush.timeout),new m(o,p.leave,y({}),o.timeout).send(),o.state=d.errored,o.joinPush.reset(),o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()}),this.on(p.reply,function(e,t){o.trigger(o.replyEventName(t),e)})}return s(e,[{key:"join",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(e){this.on(p.close,e)}},{key:"onError",value:function(e){return this.on(p.error,function(t){return e(t)})}},{key:"on",value:function(e,t){var n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}},{key:"off",value:function(e,t){this.bindings=this.bindings.filter(function(n){return!(n.event===e&&(void 0===t||t===n.ref))})}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw new Error("tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var i=new m(this,e,function(){return t},n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}},{key:"leave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.state=d.leaving;var n=function(){e.socket.hasLogger()&&e.socket.log("channel","leave ".concat(e.topic)),e.trigger(p.close,"leave")},i=new m(this,p.leave,y({}),t);return i.receive("ok",function(){return n()}).receive("timeout",function(){return n()}),i.send(),this.canPush()||i.trigger("ok",{}),i}},{key:"onMessage",value:function(e,t,n){return t}},{key:"isLifecycleEvent",value:function(e){return v.indexOf(e)>=0}},{key:"isMember",value:function(e,t,n,i){return!(this.topic!==e||i&&i!==this.joinRef()&&this.isLifecycleEvent(t)&&(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:n,joinRef:i}),1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"sendJoin",value:function(e){this.state=d.joining,this.joinPush.resend(e)}},{key:"rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||this.sendJoin(e)}},{key:"trigger",value:function(e,t,n,i){var r=this.onMessage(e,t,n,i);if(t&&!r)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var o=0;o<this.bindings.length;o++){var a=this.bindings[o];a.event===e&&a.callback(r,n,i||this.joinRef())}}},{key:"replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"isClosed",value:function(){return this.state===d.closed}},{key:"isErrored",value:function(){return this.state===d.errored}},{key:"isJoined",value:function(){return this.state===d.joined}},{key:"isJoining",value:function(){return this.state===d.joining}},{key:"isLeaving",value:function(){return this.state===d.leaving}}]),e}(),k={encode:function(e,t){var n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))},decode:function(e,t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(JSON.parse(e),5);return t({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})}},x=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||h,this.transport=i.transport||f.WebSocket||_,this.defaultEncoder=k.encode,this.defaultDecoder=k.decode,this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||"arraybuffer",this.transport!==_?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),l&&l.addEventListener("beforeunload",function(e){n.unloaded=!0,n.abnormalClose("unloaded")}),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(e){return i.rejoinAfterMs?i.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4},this.reconnectAfterMs=function(e){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=y(i.params||{}),this.endPoint="".concat(t,"/").concat(g.websocket),this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new A(function(){n.teardown(function(){return n.connect()})},this.reconnectAfterMs)}return s(e,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var e=w.appendParams(w.appendParams(this.endPoint,this.params()),{vsn:"2.0.0"});return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?"".concat(this.protocol(),":").concat(e):"".concat(this.protocol(),"://").concat(location.host).concat(e)}},{key:"disconnect",value:function(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}},{key:"connect",value:function(e){var t=this;e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=y(e)),this.conn||(this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return t.onConnOpen()},this.conn.onerror=function(e){return t.onConnError(e)},this.conn.onmessage=function(e){return t.onConnMessage(e)},this.conn.onclose=function(e){return t.onConnClose(e)})}},{key:"log",value:function(e,t,n){this.logger(e,t,n)}},{key:"hasLogger",value:function(){return null!==this.logger}},{key:"onOpen",value:function(e){this.stateChangeCallbacks.open.push(e)}},{key:"onClose",value:function(e){this.stateChangeCallbacks.close.push(e)}},{key:"onError",value:function(e){this.stateChangeCallbacks.error.push(e)}},{key:"onMessage",value:function(e){this.stateChangeCallbacks.message.push(e)}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(function(e){return e()})}},{key:"resetHeartbeat",value:function(){var e=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return e.sendHeartbeat()},this.heartbeatIntervalMs))}},{key:"teardown",value:function(e,t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n||""):this.conn.close(),this.conn=null),e&&e()}},{key:"onConnClose",value:function(e){this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(t){return t(e)})}},{key:"onConnError",value:function(e){this.hasLogger()&&this.log("transport",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(t){return t(e)})}},{key:"triggerChanError",value:function(){this.channels.forEach(function(e){e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(p.error)})}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case c.connecting:return"connecting";case c.open:return"open";case c.closing:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return"open"===this.connectionState()}},{key:"remove",value:function(e){this.channels=this.channels.filter(function(t){return t.joinRef()!==e.joinRef()})}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new b(e,t,this);return this.channels.push(n),n}},{key:"push",value:function(e){var t=this;if(this.hasLogger()){var n=e.topic,i=e.event,r=e.payload,o=e.ref,a=e.join_ref;this.log("push","".concat(n," ").concat(i," (").concat(a,", ").concat(o,")"),r)}this.isConnected()?this.encode(e,function(e){return t.conn.send(e)}):this.sendBuffer.push(function(){return t.encode(e,function(e){return t.conn.send(e)})})}},{key:"makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"sendHeartbeat",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}},{key:"abnormalClose",value:function(e){this.closeWasClean=!1,this.conn.close(1e3,e)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(e){return e()}),this.sendBuffer=[])}},{key:"onConnMessage",value:function(e){var t=this;this.decode(e.data,function(e){var n=e.topic,i=e.event,r=e.payload,o=e.ref,a=e.join_ref;o&&o===t.pendingHeartbeatRef&&(t.pendingHeartbeatRef=null),t.hasLogger()&&t.log("receive","".concat(r.status||""," ").concat(n," ").concat(i," ").concat(o&&"("+o+")"||""),r);for(var s=0;s<t.channels.length;s++){var u=t.channels[s];u.isMember(n,i,r,a)&&u.trigger(i,r,o,a)}for(var l=0;l<t.stateChangeCallbacks.message.length;l++)t.stateChangeCallbacks.message[l](e)})}}]),e}(),_=function(){function e(t){r(this,e),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=c.connecting,this.poll()}return s(e,[{key:"normalizeEndpoint",value:function(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+g.websocket),"$1/"+g.longpoll)}},{key:"endpointURL",value:function(){return w.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=c.connecting}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var e=this;this.readyState!==c.open&&this.readyState!==c.connecting||w.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),function(t){if(t){var n=t.status,i=t.token,r=t.messages;e.token=i}else n=0;switch(n){case 200:r.forEach(function(t){return e.onmessage({data:t})}),e.poll();break;case 204:e.poll();break;case 410:e.readyState=c.open,e.onopen(),e.poll();break;case 0:case 500:e.onerror(),e.closeAndRetry();break;default:throw new Error("unhandled poll status ".concat(n))}})}},{key:"send",value:function(e){var t=this;w.request("POST",this.endpointURL(),"application/json",e,this.timeout,this.onerror.bind(this,"timeout"),function(e){e&&200===e.status||(t.onerror(e&&e.status),t.closeAndRetry())})}},{key:"close",value:function(e,t){this.readyState=c.closed,this.onclose()}}]),e}(),w=function(){function e(){r(this,e)}return s(e,null,[{key:"request",value:function(e,t,n,i,r,o,a){if(f.XDomainRequest){var s=new XDomainRequest;this.xdomainRequest(s,e,t,i,r,o,a)}else{var u=f.XMLHttpRequest?new f.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");this.xhrRequest(u,e,t,n,i,r,o,a)}}},{key:"xdomainRequest",value:function(e,t,n,i,r,o,a){var s=this;e.timeout=r,e.open(t,n),e.onload=function(){var t=s.parseJSON(e.responseText);a&&a(t)},o&&(e.ontimeout=o),e.onprogress=function(){},e.send(i)}},{key:"xhrRequest",value:function(e,t,n,i,r,o,a,s){var u=this;e.open(t,n,!0),e.timeout=o,e.setRequestHeader("Content-Type",i),e.onerror=function(){s&&s(null)},e.onreadystatechange=function(){if(e.readyState===u.states.complete&&s){var t=u.parseJSON(e.responseText);s(t)}},a&&(e.ontimeout=a),e.send(r)}},{key:"parseJSON",value:function(e){if(!e||""===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}},{key:"serialize",value:function(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var o=t?"".concat(t,"[").concat(r,"]"):r,a=e[r];"object"===i(a)?n.push(this.serialize(a,o)):n.push(encodeURIComponent(o)+"="+encodeURIComponent(a))}return n.join("&")}},{key:"appendParams",value:function(e,t){if(0===Object.keys(t).length)return e;var n=e.match(/\?/)?"&":"?";return"".concat(e).concat(n).concat(this.serialize(t))}}]),e}();w.states={complete:4};var j=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var o=i.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=t,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(o.state,function(t){var i=n.caller,r=i.onJoin,o=i.onLeave,a=i.onSync;n.joinRef=n.channel.joinRef(),n.state=e.syncState(n.state,t,r,o),n.pendingDiffs.forEach(function(t){n.state=e.syncDiff(n.state,t,r,o)}),n.pendingDiffs=[],a()}),this.channel.on(o.diff,function(t){var i=n.caller,r=i.onJoin,o=i.onLeave,a=i.onSync;n.inPendingSyncState()?n.pendingDiffs.push(t):(n.state=e.syncDiff(n.state,t,r,o),a())})}return s(e,[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"list",value:function(t){return e.list(this.state,t)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(e,t,n,i){var r=this,o=this.clone(e),a={},s={};return this.map(o,function(e,n){t[e]||(s[e]=n)}),this.map(t,function(e,t){var n=o[e];if(n){var i=t.metas.map(function(e){return e.phx_ref}),u=n.metas.map(function(e){return e.phx_ref}),l=t.metas.filter(function(e){return u.indexOf(e.phx_ref)<0}),f=n.metas.filter(function(e){return i.indexOf(e.phx_ref)<0});l.length>0&&(a[e]=t,a[e].metas=l),f.length>0&&(s[e]=r.clone(n),s[e].metas=f)}else a[e]=t}),this.syncDiff(o,{joins:a,leaves:s},n,i)}},{key:"syncDiff",value:function(e,t,n,i){var r=t.joins,o=t.leaves,a=this.clone(e);return n||(n=function(){}),i||(i=function(){}),this.map(r,function(e,t){var i=a[e];if(a[e]=t,i){var r,o=a[e].metas.map(function(e){return e.phx_ref}),s=i.metas.filter(function(e){return o.indexOf(e.phx_ref)<0});(r=a[e].metas).unshift.apply(r,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(s))}n(e,i,t)}),this.map(o,function(e,t){var n=a[e];if(n){var r=t.metas.map(function(e){return e.phx_ref});n.metas=n.metas.filter(function(e){return r.indexOf(e.phx_ref)<0}),i(e,n,t),0===n.metas.length&&delete a[e]}}),a}},{key:"list",value:function(e,t){return t||(t=function(e,t){return t}),this.map(e,function(e,n){return t(e,n)})}},{key:"map",value:function(e,t){return Object.getOwnPropertyNames(e).map(function(n){return t(n,e[n])})}},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}(),A=function(){function e(t,n){r(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return s(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.tries=e.tries+1,e.callback()},this.timerCalc(this.tries+1))}}]),e}()}])})}).call(this,n(4)(e))},function(e,t,n){"use strict";var i;n.r(t);var r="http://www.w3.org/1999/xhtml",o="undefined"==typeof document?void 0:document;function a(e,t){var n=e.nodeName,i=t.nodeName;return n===i||!!(t.actualize&&n.charCodeAt(0)<91&&i.charCodeAt(0)>90)&&n===i.toUpperCase()}function s(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var u={OPTION:function(e,t){var n=e.parentNode;if(n){var i=n.nodeName.toUpperCase();"OPTGROUP"===i&&(i=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==i||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}s(e,t,"selected")},INPUT:function(e,t){s(e,t,"checked"),s(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var i=e.firstChild;if(i){var r=i.nodeValue;if(r==n||!n&&r==e.placeholder)return;i.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,i,r=-1,o=0,a=e.firstChild;a;)if("OPTGROUP"===(i=a.nodeName&&a.nodeName.toUpperCase()))a=(n=a).firstChild;else{if("OPTION"===i){if(a.hasAttribute("selected")){r=o;break}o++}!(a=a.nextSibling)&&n&&(a=n.nextSibling,n=null)}e.selectedIndex=r}}},l=1,f=3,c=8;function h(){}function d(e){return e.id}var p=function(e){return function(t,n,s){if(s||(s={}),"string"==typeof n)if("#document"===t.nodeName||"HTML"===t.nodeName){var p=n;(n=o.createElement("html")).innerHTML=p}else n=function(e){var t;return!i&&o.createRange&&(i=o.createRange()).selectNode(o.body),i&&i.createContextualFragment?t=i.createContextualFragment(e):(t=o.createElement("body")).innerHTML=e,t.childNodes[0]}(n);var v,g=s.getNodeKey||d,y=s.onBeforeNodeAdded||h,m=s.onNodeAdded||h,b=s.onBeforeElUpdated||h,k=s.onElUpdated||h,x=s.onBeforeNodeDiscarded||h,_=s.onNodeDiscarded||h,w=s.onBeforeElChildrenUpdated||h,j=!0===s.childrenOnly,A={};function C(e){v?v.push(e):v=[e]}function E(e,t,n){!1!==x(e)&&(t&&t.removeChild(e),_(e),function e(t,n){if(t.nodeType===l)for(var i=t.firstChild;i;){var r=void 0;n&&(r=g(i))?C(r):(_(i),i.firstChild&&e(i,n)),i=i.nextSibling}}(e,n))}function S(e){m(e);for(var t=e.firstChild;t;){var n=t.nextSibling,i=g(t);if(i){var r=A[i];r&&a(t,r)&&(t.parentNode.replaceChild(r,t),R(r,t))}S(t),t=n}}function R(i,r,s){var h,d=g(r);if(d&&delete A[d],!n.isSameNode||!n.isSameNode(t)){if(!s){if(!1===b(i,r))return;if(e(i,r),k(i),!1===w(i,r))return}if("TEXTAREA"!==i.nodeName){var p,v,m,x,_=r.firstChild,j=i.firstChild;e:for(;_;){for(m=_.nextSibling,p=g(_);j;){if(v=j.nextSibling,_.isSameNode&&_.isSameNode(j)){_=m,j=v;continue e}h=g(j);var O=j.nodeType,T=void 0;if(O===_.nodeType&&(O===l?(p?p!==h&&((x=A[p])?j.nextSibling===x?T=!1:(i.insertBefore(x,j),v=j.nextSibling,h?C(h):E(j,i,!0),j=x):T=!1):h&&(T=!1),(T=!1!==T&&a(j,_))&&R(j,_)):O!==f&&O!=c||(T=!0,j.nodeValue!==_.nodeValue&&(j.nodeValue=_.nodeValue))),T){_=m,j=v;continue e}h?C(h):E(j,i,!0),j=v}if(p&&(x=A[p])&&a(x,_))i.appendChild(x),R(x,_);else{var P=y(_);!1!==P&&(P&&(_=P),_.actualize&&(_=_.actualize(i.ownerDocument||o)),i.appendChild(_),S(_))}_=m,j=v}for(;j;)v=j.nextSibling,(h=g(j))?C(h):E(j,i,!0),j=v}var N=u[i.nodeName];N&&N(i,r)}}!function e(t){if(t.nodeType===l)for(var n=t.firstChild;n;){var i=g(n);i&&(A[i]=n),e(n),n=n.nextSibling}}(t);var O=t,T=O.nodeType,P=n.nodeType;if(!j)if(T===l)P===l?a(t,n)||(_(t),O=function(e,t){for(var n=e.firstChild;n;){var i=n.nextSibling;t.appendChild(n),n=i}return t}(t,function(e,t){return t&&t!==r?o.createElementNS(t,e):o.createElement(e)}(n.nodeName,n.namespaceURI))):O=n;else if(T===f||T===c){if(P===T)return O.nodeValue!==n.nodeValue&&(O.nodeValue=n.nodeValue),O;O=n}if(O===n)_(t);else if(R(O,n,j),v)for(var N=0,M=v.length;N<M;N++){var I=A[v[N]];I&&E(I,I.parentNode,!1)}return!j&&O!==t&&t.parentNode&&(O.actualize&&(O=O.actualize(t.ownerDocument||o)),t.parentNode.replaceChild(O,t)),O}}(function(e,t){var n,i,r,o,a,s=t.attributes;for(n=s.length-1;n>=0;--n)r=(i=s[n]).name,o=i.namespaceURI,a=i.value,o?(r=i.localName||r,e.getAttributeNS(o,r)!==a&&e.setAttributeNS(o,r,a)):e.getAttribute(r)!==a&&e.setAttribute(r,a);for(n=(s=e.attributes).length-1;n>=0;--n)!1!==(i=s[n]).specified&&(r=i.name,(o=i.namespaceURI)?(r=i.localName||r,t.hasAttributeNS(o,r)||e.removeAttributeNS(o,r)):t.hasAttribute(r)||e.removeAttribute(r))}),v=n(0);function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"debug",function(){return E}),n.d(t,"Rendered",function(){return N}),n.d(t,"LiveSocket",function(){return M}),n.d(t,"Browser",function(){return I}),n.d(t,"View",function(){return D});var x=n(3).create({}),_="data-phx-view",w="[".concat(_,"]"),j=["text","textarea","number","email","password","search","tel","url"],A=100,C="phx-",E=function(e,t,n,i){console.log("".concat(e.id," ").concat(t,": ").concat(n," - "),i)},S=function(e){return"object"===k(e)&&!(e instanceof Array)},R=function(e,t){return e?e[t]:null},O=function(e){var t=new FormData(e),n=new URLSearchParams,i=!0,r=!1,o=void 0;try{for(var a,s=t.entries()[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=b(a.value,2),l=u[0],f=u[1];n.set(l,f)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n.toString()},T=function(e,t,n){for(var i=e.querySelectorAll(t),r=0,o=i.length;r<o;r++)n(i[r])},P={get:function(e){return e.getAttribute("data-phx-session")},isEqual:function(e,t){return this.get(e)===this.get(t)}},N={mergeDiff:function(e,t){return this.isNewFingerprint(t)?t:(function e(t,n){for(var i in n){var r=n[i],o=t[i];S(r)&&o?(S(o)&&o.dynamics&&!r.dynamics&&delete o.dynamics,e(o,r)):t[i]=r}}(e,t),e)},isNewFingerprint:function(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).static},toString:function(e){var t={buffer:""};return this.toOutputBuffer(e,t),t.buffer},toOutputBuffer:function(e,t){if(e.dynamics)return this.comprehensionToBuffer(e,t);var n=e.static;t.buffer+=n[0];for(var i=1;i<n.length;i++)this.dynamicToBuffer(e[i-1],t),t.buffer+=n[i]},comprehensionToBuffer:function(e,t){for(var n=e.dynamics,i=e.static,r=0;r<n.length;r++){var o=n[r];t.buffer+=i[0];for(var a=1;a<i.length;a++)this.dynamicToBuffer(o[a-1],t),t.buffer+=i[a]}},dynamicToBuffer:function(e,t){S(e)?this.toOutputBuffer(e,t):t.buffer+=e}},M=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(this,e),this.unloaded=!1,this.socket=new v.Socket(t,i),this.socket.onOpen(function(){n.isUnloaded()&&(n.destroyAllViews(),n.joinRootViews()),n.unloaded=!1}),window.addEventListener("beforeunload",function(e){n.unloaded=!0}),this.bindingPrefix=i.bindingPrefix||C,this.opts=i,this.views={},this.viewLogger=i.viewLogger,this.activeElement=null,this.prevActive=null,this.prevInput=null,this.prevValue=null,this.silenced=!1,this.bindTopLevelEvents()}return m(e,[{key:"isUnloaded",value:function(){return this.unloaded}},{key:"getSocket",value:function(){return this.socket}},{key:"log",value:function(e,t,n){if(this.viewLogger){var i=b(n(),2),r=i[0],o=i[1];this.viewLogger(e,t,r,o)}}},{key:"connect",value:function(){var e=this;return["complete","loaded","interactive"].indexOf(document.readyState)>=0?this.joinRootViews():document.addEventListener("DOMContentLoaded",function(){e.joinRootViews()}),this.socket.connect()}},{key:"getBindingPrefix",value:function(){return this.bindingPrefix}},{key:"binding",value:function(e){return"".concat(this.getBindingPrefix()).concat(e)}},{key:"disconnect",value:function(){this.socket.disconnect()}},{key:"channel",value:function(e,t){return this.socket.channel(e,t||{})}},{key:"joinRootViews",value:function(){var e=this;T(document,"".concat(w,":not([").concat("data-phx-parent-id","])"),function(t){e.joinView(t)})}},{key:"joinView",value:function(e,t){if(!this.getViewById(e.id)){var n=new D(e,this,t);this.views[n.id]=n,n.join()}}},{key:"owner",value:function(e,t){var n=this.getViewById(R(e.closest(w),"id"));n&&t(n)}},{key:"getViewById",value:function(e){return this.views[e]}},{key:"onViewError",value:function(e){this.dropActiveElement(e)}},{key:"destroyAllViews",value:function(){for(var e in this.views)this.destroyViewById(e)}},{key:"destroyViewById",value:function(e){var t=this.views[e];t&&(delete this.views[t.id],t.destroy())}},{key:"setActiveElement",value:function(e){var t=this;if(this.activeElement!==e){this.activeElement=e;var n=function(){e===t.activeElement&&(t.activeElement=null),e.removeEventListener("mouseup",t),e.removeEventListener("touchend",t)};e.addEventListener("mouseup",n),e.addEventListener("touchend",n)}}},{key:"getActiveElement",value:function(){return document.activeElement===document.body&&this.activeElement||document.activeElement}},{key:"dropActiveElement",value:function(e){this.prevActive&&e.ownsElement(this.prevActive)&&(this.prevActive=null)}},{key:"restorePreviouslyActiveFocus",value:function(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}},{key:"blurActiveElement",value:function(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}},{key:"bindTopLevelEvents",value:function(){this.bindClicks(),this.bindForms(),this.bindTargetable({keyup:"keyup",keydown:"keydown"},function(e,t,n,i,r,o){n.pushKey(i,t,e,r)}),this.bindTargetable({blur:"focusout",focus:"focusin"},function(e,t,n,i,r,o){o||n.pushEvent(t,i,r)}),this.bindTargetable({blur:"blur",focus:"focus"},function(e,t,n,i,r,o){o&&"window"!==!o&&n.pushEvent(t,i,r)})}},{key:"bindTargetable",value:function(e,t){var n=this,i=function(i){var r=e[i];n.on(r,function(e){var r=n.binding(i),o=n.binding("target"),a=e.target.getAttribute&&e.target.getAttribute(r);a&&!e.target.getAttribute(o)?n.owner(e.target,function(n){return t(e,i,n,e.target,a,null)}):T(document,"[".concat(r,"][").concat(o,"=window]"),function(o){var a=o.getAttribute(r);n.owner(o,function(n){return t(e,i,n,o,a,"window")})})})};for(var r in e)i(r)}},{key:"bindClicks",value:function(){var e=this;window.addEventListener("click",function(t){var n=e.binding("click"),i=function(e,t){do{if(e.matches("[".concat(t,"]")))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType&&!e.matches(w));return null}(t.target,n),r=i&&i.getAttribute(n);r&&(t.preventDefault(),e.owner(i,function(e){return e.pushEvent("click",i,r)}))},!1)}},{key:"bindForms",value:function(){var e=this;this.on("submit",function(t){var n=t.target.getAttribute(e.binding("submit"));n&&(t.preventDefault(),t.target.disabled=!0,e.owner(t.target,function(e){return e.submitForm(t.target,n)}))},!1);for(var t=["change","input"],n=0;n<t.length;n++){var i=t[n];this.on(i,function(t){var n=t.target,i="checkbox"===n.type?"checked":"value";if(e.prevInput!==n||e.prevValue!==n[i]){e.prevInput=n,e.prevValue=n[i];var r=n.form&&n.form.getAttribute(e.binding("change"));r&&e.owner(n,function(t){L.isTextualInput(n)?n.setAttribute("data-phx-has-focused",!0):e.setActiveElement(n),t.pushInput(n,r)})}},!1)}}},{key:"silenceEvents",value:function(e){this.silenced=!0,e(),this.silenced=!1}},{key:"on",value:function(e,t){var n=this;window.addEventListener(e,function(e){n.silenced||t(e)})}}]),e}(),I={setCookie:function(e,t){document.cookie="".concat(e,"=").concat(t)},getCookie:function(e){return document.cookie.replace(new RegExp("(?:(?:^|.*;s*)".concat(e,"s*=s*([^;]*).*$)|^.*$")),"$1")},redirect:function(e,t){t&&I.setCookie("__phoenix_flash__",t+"; max-age=60000; path=/"),window.location=e}},L={disableForm:function(e,t){var n="".concat(t).concat("disable-with");e.classList.add("phx-loading"),T(e,"[".concat(n,"]"),function(e){var t=e.getAttribute(n);e.setAttribute("".concat(n,"-restore"),e.innerText),e.innerText=t}),T(e,"button",function(e){e.setAttribute("data-phx-disabled",e.disabled),e.disabled=!0}),T(e,"input",function(e){e.setAttribute("data-phx-readonly",e.readOnly),e.readOnly=!0})},restoreDisabledForm:function(e,t){var n="".concat(t).concat("disable-with");e.classList.remove("phx-loading"),T(e,"[".concat(n,"]"),function(e){var t=e.getAttribute("".concat(n,"-restore"));t&&(e.innerText=t,e.removeAttribute("".concat(n,"-restore")))}),T(e,"button",function(e){var t=e.getAttribute("data-phx-disabled");t&&(e.disabled="true"===t,e.removeAttribute("data-phx-disabled"))}),T(e,"input",function(e){var t=e.getAttribute("data-phx-readonly");t&&(e.readOnly="true"===t,e.removeAttribute("data-phx-readonly"))})},discardError:function(e){var t=e.getAttribute&&e.getAttribute("data-phx-error-for");if(t){var n=document.getElementById(t);!t||n.getAttribute("data-phx-has-focused")||n.form.getAttribute("data-phx-has-submitted")||(e.style.display="none")}},isPhxChild:function(e){return e.getAttribute&&e.getAttribute("data-phx-parent-id")},patch:function(e,t,n,i){var r=e.liveSocket.getActiveElement(),o=null,a=null,s=e.liveSocket.binding("ignore");L.isTextualInput(r)&&(o=r.selectionStart,a=r.selectionEnd),p(t,"<div>".concat(i,"</div>"),{childrenOnly:!0,onBeforeNodeAdded:function(e){return L.discardError(e),e},onNodeAdded:function(t){if(L.isPhxChild(t)&&e.ownsElement(t))return e.onNewChildAdded(),!0},onBeforeNodeDiscarded:function(t){return!(t.getAttribute&&null!=t.getAttribute(s)||t.parentNode&&null!=t.parentNode.getAttribute(s))&&(L.isPhxChild(t)?(e.liveSocket.destroyViewById(t.id),!0):void 0)},onBeforeElUpdated:function(t,n){if(L.isPhxChild(n)){var i=t.getAttribute("data-phx-static");return P.isEqual(n,t)||(e.liveSocket.destroyViewById(t.id),e.onNewChildAdded()),L.mergeAttrs(t,n),t.setAttribute("data-phx-static",i),!1}return t.getAttribute&&t.getAttribute("data-phx-has-submitted")&&n.setAttribute("data-phx-has-submitted",!0),t.getAttribute&&t.getAttribute("data-phx-has-focused")&&n.setAttribute("data-phx-has-focused",!0),L.discardError(n),!L.isTextualInput(t)||t!==r||(L.mergeInputs(t,n),!1)}}),e.liveSocket.silenceEvents(function(){L.restoreFocus(r,o,a)}),document.dispatchEvent(new Event("phx:update"))},mergeAttrs:function(e,t){t.getAttributeNames().forEach(function(n){var i=t.getAttribute(n);e.setAttribute(n,i)})},mergeInputs:function(e,t){L.mergeAttrs(e,t),e.readOnly=t.readOnly},restoreFocus:function(e,t,n){L.isTextualInput(e)&&((""===e.value||e.readOnly)&&e.blur(),e.focus(),(e.setSelectionRange&&"text"===e.type||"textarea"===e.type)&&e.setSelectionRange(t,n))},isTextualInput:function(e){return j.indexOf(e.type)>=0}},D=function(){function e(t,n,i){var r=this;g(this,e),this.liveSocket=n,this.parent=i,this.newChildrenAdded=!1,this.gracefullyClosed=!1,this.el=t,this.loader=this.el.nextElementSibling,this.lastPayload=null,this.id=this.el.id,this.view=this.el.getAttribute(_),this.channel=this.liveSocket.channel("lv:".concat(this.id),function(){return{session:r.getSession(),static:r.getStatic()}}),this.loaderTimer=setTimeout(function(){return r.showLoader()},A),this.bindChannel()}return m(e,[{key:"getSession",value:function(){return P.get(this.el)}},{key:"getStatic",value:function(){var e=this.el.getAttribute("data-phx-static");return""===e?null:e}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.hasGracefullyClosed()?(this.log("destroyed",function(){return["the server view has gracefully closed"]}),e()):(this.log("destroyed",function(){return["the child has been removed from the parent"]}),this.channel.leave().receive("ok",e).receive("error",e).receive("timeout",e))}},{key:"hideLoader",value:function(){clearTimeout(this.loaderTimer),this.loader.style.display="none"}},{key:"setContainerClasses",value:function(){var e;this.el.classList.remove("phx-connected","phx-disconnected","phx-error"),(e=this.el.classList).add.apply(e,arguments)}},{key:"showLoader",value:function(){clearTimeout(this.loaderTimer),this.setContainerClasses("phx-disconnected"),this.loader.style.display="block";var e=Math.floor(this.el.clientHeight/2);this.loader.style.top="-".concat(e,"px")}},{key:"log",value:function(e,t){this.liveSocket.log(this,e,t)}},{key:"onJoin",value:function(e){var t=e.rendered;this.log("join",function(){return["",JSON.stringify(t)]}),this.rendered=t,this.hideLoader(),this.setContainerClasses("phx-connected"),L.patch(this,this.el,this.id,N.toString(this.rendered)),this.joinNewChildren()}},{key:"joinNewChildren",value:function(){var e=this;T(document,"".concat(w,"[").concat("data-phx-parent-id",'="').concat(this.id,'"]'),function(t){e.liveSocket.getViewById(t.id)||e.liveSocket.joinView(t,e)})}},{key:"update",value:function(e){if(!function(e){return 0===Object.keys(e).length}(e)){this.log("update",function(){return["",JSON.stringify(e)]}),this.rendered=N.mergeDiff(this.rendered,e);var t=N.toString(this.rendered);this.newChildrenAdded=!1,L.patch(this,this.el,this.id,t),this.newChildrenAdded&&this.joinNewChildren()}}},{key:"onNewChildAdded",value:function(){this.newChildrenAdded=!0}},{key:"savePayload",value:function(e){this.lastPayload=e}},{key:"updatePayload",value:function(e){var t=x.patch(this.lastPayload,e);this.lastPayload=t,this.update(t)}},{key:"bindChannel",value:function(){var e=this;this.channel.on("render",function(t){return e.update(t)}),this.channel.on("render",function(t){return e.savePayload(t)}),this.channel.on("render_diff",function(t){return e.updatePayload(t)}),this.channel.on("redirect",function(e){var t=e.to,n=e.flash;return I.redirect(t,n)}),this.channel.on("session",function(t){var n=t.token;return e.el.setAttribute("data-phx-session",n)}),this.channel.onError(function(t){return e.onError(t)}),this.channel.onClose(function(){return e.onGracefulClose()})}},{key:"onGracefulClose",value:function(){this.gracefullyClosed=!0,this.liveSocket.destroyViewById(this.id)}},{key:"hasGracefullyClosed",value:function(){return this.gracefullyClosed}},{key:"join",value:function(){var e=this;this.parent&&(this.parent.channel.onClose(function(){return e.onGracefulClose()}),this.parent.channel.onError(function(){return e.liveSocket.destroyViewById(e.id)})),this.channel.join().receive("ok",function(t){return e.onJoin(t)}).receive("error",function(t){return e.onJoinError(t)}).receive("timeout",function(){return e.onJoinError("timeout")})}},{key:"onJoinError",value:function(e){this.displayError(),this.log("error",function(){return["unable to join",e]})}},{key:"onError",value:function(e){this.log("error",function(){return["view crashed",e]}),this.liveSocket.onViewError(this),document.activeElement.blur(),this.liveSocket.isUnloaded()?this.showLoader():this.displayError()}},{key:"displayError",value:function(){this.showLoader(),this.setContainerClasses("phx-disconnected","phx-error")}},{key:"pushWithReply",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this.channel.push(e,t,2e4).receive("ok",function(e){n.update(e),i()})}},{key:"pushEvent",value:function(e,t,n){var i=t.getAttribute(this.binding("value"))||t.value||"";this.pushWithReply("event",{type:e,event:n,value:i})}},{key:"pushKey",value:function(e,t,n,i){this.pushWithReply("event",{type:t,event:i,value:e.value||n.key})}},{key:"pushInput",value:function(e,t){this.pushWithReply("event",{type:"form",event:t,value:O(e.form)})}},{key:"pushFormSubmit",value:function(e,t,n){this.pushWithReply("event",{type:"form",event:t,value:O(e)},n)}},{key:"ownsElement",value:function(e){return e.getAttribute("data-phx-parent-id")===this.id||R(e.closest(w),"id")===this.id}},{key:"submitForm",value:function(e,t){var n=this,i=this.liveSocket.getBindingPrefix();e.setAttribute("data-phx-has-submitted","true"),L.disableForm(e,i),this.liveSocket.blurActiveElement(this),this.pushFormSubmit(e,t,function(){L.restoreDisabledForm(e,i),n.liveSocket.restorePreviouslyActiveFocus()})}},{key:"binding",value:function(e){return this.liveSocket.binding(e)}}]),e}();t.default=M},function(e,t){},function(e,t,n){!function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},f=function(){function e(t){i(this,e),this.selfOptions=t||{},this.pipes={}}return r(e,[{key:"options",value:function(e){return e&&(this.selfOptions=e),this.selfOptions}},{key:"pipe",value:function(e,t){var n=t;if("string"==typeof e){if(void 0===n)return this.pipes[e];this.pipes[e]=n}if(e&&e.name){if(n=e,n.processor===this)return n;this.pipes[n.name]=n}return n.processor=this,n}},{key:"process",value:function(e,t){var n=e;n.options=this.options();for(var i=t||e.pipe||"default",r=void 0,o=void 0;i;)void 0!==n.nextAfterChildren&&(n.next=n.nextAfterChildren,n.nextAfterChildren=null),"string"==typeof i&&(i=this.pipe(i)),i.process(n),o=n,r=i,i=null,n&&n.next&&(n=n.next,i=o.nextPipe||n.pipe||r);return n.hasResult?n.result:void 0}}]),e}(),c=function(){function e(t){i(this,e),this.name=t,this.filters=[]}return r(e,[{key:"process",value:function(e){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var t=this.debug,i=this.filters.length,r=e,o=0;o<i;o++){var a=this.filters[o];if(t&&this.log("filter: "+a.filterName),a(r),"object"===(void 0===r?"undefined":n(r))&&r.exiting){r.exiting=!1;break}}!r.next&&this.resultCheck&&this.resultCheck(r)}},{key:"log",value:function(e){console.log("[jsondiffpatch] "+this.name+" pipe, "+e)}},{key:"append",value:function(){var e;return(e=this.filters).push.apply(e,arguments),this}},{key:"prepend",value:function(){var e;return(e=this.filters).unshift.apply(e,arguments),this}},{key:"indexOf",value:function(e){if(!e)throw new Error("a filter name is required");for(var t=0;t<this.filters.length;t++){var n=this.filters[t];if(n.filterName===e)return t}throw new Error("filter not found: "+e)}},{key:"list",value:function(){return this.filters.map(function(e){return e.filterName})}},{key:"after",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t+1,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"before",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"replace",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t,1),Array.prototype.splice.apply(this.filters,n),this}},{key:"remove",value:function(e){var t=this.indexOf(e);return this.filters.splice(t,1),this}},{key:"clear",value:function(){return this.filters.length=0,this}},{key:"shouldHaveResult",value:function(e){if(!1!==e){if(!this.resultCheck){var t=this;return this.resultCheck=function(e){if(!e.hasResult){console.log(e);var n=new Error(t.name+" failed");throw n.noResult=!0,n}},this}}else this.resultCheck=null}}]),e}(),h=function(){function e(){i(this,e)}return r(e,[{key:"setResult",value:function(e){return this.result=e,this.hasResult=!0,this}},{key:"exit",value:function(){return this.exiting=!0,this}},{key:"switchTo",value:function(e,t){return"string"==typeof e||e instanceof c?this.nextPipe=e:(this.next=e,t&&(this.nextPipe=t)),this}},{key:"push",value:function(e,t){return e.parent=this,void 0!==t&&(e.childName=t),e.root=this.root||this,e.options=e.options||this.options,this.children?(this.children[this.children.length-1].next=e,this.children.push(e)):(this.children=[e],this.nextAfterChildren=this.next||null,this.next=e),e.next=this,this}}]),e}(),d="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array};function p(e){if("object"!==(void 0===e?"undefined":n(e)))return e;if(null===e)return null;if(d(e))return e.map(p);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return function(e){var t=/^\/(.*)\/([gimyu]*)$/.exec(e.toString());return new RegExp(t[1],t[2])}(e);var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=p(e[i]));return t}var v=function(e){function t(e,n){i(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.left=e,r.right=n,r.pipe="diff",r}return a(t,e),r(t,[{key:"setResult",value:function(e){if(this.options.cloneDiffValues&&"object"===(void 0===e?"undefined":n(e))){var t="function"==typeof this.options.cloneDiffValues?this.options.cloneDiffValues:p;"object"===n(e[0])&&(e[0]=t(e[0])),"object"===n(e[1])&&(e[1]=t(e[1]))}return h.prototype.setResult.apply(this,arguments)}}]),t}(h),g=function(e){function t(e,n){i(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.left=e,r.delta=n,r.pipe="patch",r}return a(t,e),t}(h),y=function(e){function t(e){i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.delta=e,n.pipe="reverse",n}return a(t,e),t}(h),m="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},b=function(e){if(e.left!==e.right)if(void 0!==e.left)if(void 0!==e.right){if("function"==typeof e.left||"function"==typeof e.right)throw new Error("functions are not supported");e.leftType=null===e.left?"null":n(e.left),e.rightType=null===e.right?"null":n(e.right),e.leftType===e.rightType&&"boolean"!==e.leftType&&"number"!==e.leftType?("object"===e.leftType&&(e.leftIsArray=m(e.left)),"object"===e.rightType&&(e.rightIsArray=m(e.right)),e.leftIsArray===e.rightIsArray?e.left instanceof RegExp&&(e.right instanceof RegExp?e.setResult([e.left.toString(),e.right.toString()]).exit():e.setResult([e.left,e.right]).exit()):e.setResult([e.left,e.right]).exit()):e.setResult([e.left,e.right]).exit()}else e.setResult([e.left,0,0]).exit();else{if("function"==typeof e.right)throw new Error("functions are not supported");e.setResult([e.right]).exit()}else e.setResult(void 0).exit()};b.filterName="trivial";var k=function(e){if(void 0!==e.delta){if(e.nested=!m(e.delta),!e.nested)if(1!==e.delta.length)if(2!==e.delta.length)3===e.delta.length&&0===e.delta[2]&&e.setResult(void 0).exit();else{if(e.left instanceof RegExp){var t=/^\/(.*)\/([gimyu]+)$/.exec(e.delta[1]);if(t)return void e.setResult(new RegExp(t[1],t[2])).exit()}e.setResult(e.delta[1]).exit()}else e.setResult(e.delta[0]).exit()}else e.setResult(e.left).exit()};k.filterName="trivial";var x=function(e){void 0!==e.delta?(e.nested=!m(e.delta),e.nested||(1!==e.delta.length?2!==e.delta.length?3===e.delta.length&&0===e.delta[2]&&e.setResult([e.delta[0]]).exit():e.setResult([e.delta[1],e.delta[0]]).exit():e.setResult([e.delta[0],0,0]).exit())):e.setResult(e.delta).exit()};function _(e){if(e&&e.children){for(var t=e.children.length,n=void 0,i=e.result,r=0;r<t;r++)void 0!==(n=e.children[r]).result&&((i=i||{})[n.childName]=n.result);i&&e.leftIsArray&&(i._t="a"),e.setResult(i).exit()}}function w(e){if(!e.leftIsArray&&"object"===e.leftType){var t=void 0,n=void 0,i=e.options.propertyFilter;for(t in e.left)Object.prototype.hasOwnProperty.call(e.left,t)&&(i&&!i(t,e)||(n=new v(e.left[t],e.right[t]),e.push(n,t)));for(t in e.right)Object.prototype.hasOwnProperty.call(e.right,t)&&(i&&!i(t,e)||void 0===e.left[t]&&(n=new v(void 0,e.right[t]),e.push(n,t)));e.children&&0!==e.children.length?e.exit():e.setResult(void 0).exit()}}x.filterName="trivial",_.filterName="collectChildren",w.filterName="objects";var j=function(e){if(e.nested&&!e.delta._t){var t=void 0,n=void 0;for(t in e.delta)n=new g(e.left[t],e.delta[t]),e.push(n,t);e.exit()}};j.filterName="objects";var A=function(e){if(e&&e.children&&!e.delta._t){for(var t=e.children.length,n=void 0,i=0;i<t;i++)n=e.children[i],Object.prototype.hasOwnProperty.call(e.left,n.childName)&&void 0===n.result?delete e.left[n.childName]:e.left[n.childName]!==n.result&&(e.left[n.childName]=n.result);e.setResult(e.left).exit()}};A.filterName="collectChildren";var C=function(e){if(e.nested&&!e.delta._t){var t=void 0,n=void 0;for(t in e.delta)n=new y(e.delta[t]),e.push(n,t);e.exit()}};function E(e){if(e&&e.children&&!e.delta._t){for(var t=e.children.length,n=void 0,i={},r=0;r<t;r++)n=e.children[r],i[n.childName]!==n.result&&(i[n.childName]=n.result);e.setResult(i).exit()}}C.filterName="objects",E.filterName="collectChildren";var S=function(e,t,n,i){return e[n]===t[i]},R={get:function(e,t,n,i){var r=i||{},o=function(e,t,n,i){var r=e.length,o=t.length,a=void 0,s=void 0,u=[r+1];for(a=0;a<r+1;a++)for(u[a]=[o+1],s=0;s<o+1;s++)u[a][s]=0;for(u.match=n,a=1;a<r+1;a++)for(s=1;s<o+1;s++)n(e,t,a-1,s-1,i)?u[a][s]=u[a-1][s-1]+1:u[a][s]=Math.max(u[a-1][s],u[a][s-1]);return u}(e,t,n||S,r),a=function e(t,n,i,r,o,a){if(0===r||0===o)return{sequence:[],indices1:[],indices2:[]};if(t.match(n,i,r-1,o-1,a)){var s=e(t,n,i,r-1,o-1,a);return s.sequence.push(n[r-1]),s.indices1.push(r-1),s.indices2.push(o-1),s}return t[r][o-1]>t[r-1][o]?e(t,n,i,r,o-1,a):e(t,n,i,r-1,o,a)}(o,e,t,e.length,t.length,r);return"string"==typeof e&&"string"==typeof t&&(a.sequence=a.sequence.join("")),a}},O="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},T="function"==typeof Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]===t)return i;return-1};function P(e,t,i,r,o){var a=e[i],s=t[r];if(a===s)return!0;if("object"!==(void 0===a?"undefined":n(a))||"object"!==(void 0===s?"undefined":n(s)))return!1;var u=o.objectHash;if(!u)return o.matchByPosition&&i===r;var l=void 0,f=void 0;return"number"==typeof i?(o.hashCache1=o.hashCache1||[],void 0===(l=o.hashCache1[i])&&(o.hashCache1[i]=l=u(a,i))):l=u(a),void 0!==l&&("number"==typeof r?(o.hashCache2=o.hashCache2||[],void 0===(f=o.hashCache2[r])&&(o.hashCache2[r]=f=u(s,r))):f=u(s),void 0!==f&&l===f)}var N=function(e){if(e.leftIsArray){var t={objectHash:e.options&&e.options.objectHash,matchByPosition:e.options&&e.options.matchByPosition},n=0,i=0,r=void 0,o=void 0,a=void 0,s=e.left,u=e.right,l=s.length,f=u.length,c=void 0;for(l>0&&f>0&&!t.objectHash&&"boolean"!=typeof t.matchByPosition&&(t.matchByPosition=!function(e,t,n,i){for(var r=0;r<n;r++)for(var o=e[r],a=0;a<i;a++){var s=t[a];if(r!==a&&o===s)return!0}}(s,u,l,f));n<l&&n<f&&P(s,u,n,n,t);)r=n,c=new v(e.left[r],e.right[r]),e.push(c,r),n++;for(;i+n<l&&i+n<f&&P(s,u,l-1-i,f-1-i,t);)o=l-1-i,a=f-1-i,c=new v(e.left[o],e.right[a]),e.push(c,a),i++;var h=void 0;if(n+i!==l)if(n+i!==f){delete t.hashCache1,delete t.hashCache2;var d=s.slice(n,l-i),p=u.slice(n,f-i),g=R.get(d,p,P,t),y=[];for(h=h||{_t:"a"},r=n;r<l-i;r++)T(g.indices1,r-n)<0&&(h["_"+r]=[s[r],0,0],y.push(r));var m=!0;e.options&&e.options.arrays&&!1===e.options.arrays.detectMove&&(m=!1);var b=!1;e.options&&e.options.arrays&&e.options.arrays.includeValueOnMove&&(b=!0);var k=y.length;for(r=n;r<f-i;r++){var x=T(g.indices2,r-n);if(x<0){var _=!1;if(m&&k>0)for(var w=0;w<k;w++)if(o=y[w],P(d,p,o-n,r-n,t)){h["_"+o].splice(1,2,r,3),b||(h["_"+o][0]=""),a=r,c=new v(e.left[o],e.right[a]),e.push(c,a),y.splice(w,1),_=!0;break}_||(h[r]=[u[r]])}else o=g.indices1[x]+n,a=g.indices2[x]+n,c=new v(e.left[o],e.right[a]),e.push(c,a)}e.setResult(h).exit()}else{for(h=h||{_t:"a"},r=n;r<l-i;r++)h["_"+r]=[s[r],0,0];e.setResult(h).exit()}else{if(l===f)return void e.setResult(void 0).exit();for(h=h||{_t:"a"},r=n;r<f-i;r++)h[r]=[u[r]];e.setResult(h).exit()}}};N.filterName="arrays";var M={numerically:function(e,t){return e-t},numericallyBy:function(e){return function(t,n){return t[e]-n[e]}}},I=function(e){if(e.nested&&"a"===e.delta._t){var t=void 0,n=void 0,i=e.delta,r=e.left,o=[],a=[],s=[];for(t in i)if("_t"!==t)if("_"===t[0]){if(0!==i[t][2]&&3!==i[t][2])throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+i[t][2]);o.push(parseInt(t.slice(1),10))}else 1===i[t].length?a.push({index:parseInt(t,10),value:i[t][0]}):s.push({index:parseInt(t,10),delta:i[t]});for(o=o.sort(M.numerically),t=o.length-1;t>=0;t--){n=o[t];var u=i["_"+n],l=r.splice(n,1)[0];3===u[2]&&a.push({index:u[1],value:l})}var f=(a=a.sort(M.numericallyBy("index"))).length;for(t=0;t<f;t++){var c=a[t];r.splice(c.index,0,c.value)}var h=s.length,d=void 0;if(h>0)for(t=0;t<h;t++){var p=s[t];d=new g(e.left[p.index],p.delta),e.push(d,p.index)}e.children?e.exit():e.setResult(e.left).exit()}};I.filterName="arrays";var L=function(e){if(e&&e.children&&"a"===e.delta._t){for(var t=e.children.length,n=void 0,i=0;i<t;i++)n=e.children[i],e.left[n.childName]=n.result;e.setResult(e.left).exit()}};L.filterName="arraysCollectChildren";var D=function(e){if(e.nested){if("a"===e.delta._t){var t=void 0,n=void 0;for(t in e.delta)"_t"!==t&&(n=new y(e.delta[t]),e.push(n,t));e.exit()}}else 3===e.delta[2]&&(e.newName="_"+e.delta[1],e.setResult([e.delta[0],parseInt(e.childName.substr(1),10),3]).exit())};D.filterName="arrays";var B=function(e,t,n){if("string"==typeof t&&"_"===t[0])return parseInt(t.substr(1),10);if(O(n)&&0===n[2])return"_"+t;var i=+t;for(var r in e){var o=e[r];if(O(o))if(3===o[2]){var a=parseInt(r.substr(1),10),s=o[1];if(s===+t)return a;a<=i&&s>i?i++:a>=i&&s<i&&i--}else if(0===o[2]){var u=parseInt(r.substr(1),10);u<=i&&i++}else 1===o.length&&r<=i&&i--}return i};function V(e){if(e&&e.children&&"a"===e.delta._t){for(var t=e.children.length,n=void 0,i={_t:"a"},r=0;r<t;r++){var o=(n=e.children[r]).newName;void 0===o&&(o=B(e.delta,n.childName,n.result)),i[o]!==n.result&&(i[o]=n.result)}e.setResult(i).exit()}}V.filterName="arraysCollectChildren";var F=function(e){e.left instanceof Date?(e.right instanceof Date?e.left.getTime()!==e.right.getTime()?e.setResult([e.left,e.right]):e.setResult(void 0):e.setResult([e.left,e.right]),e.exit()):e.right instanceof Date&&e.setResult([e.left,e.right]).exit()};F.filterName="dates";var U=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}t.prototype.diff_main=function(e,t,n,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[0,e]]:[];void 0===n&&(n=!0);var o=n,a=this.diff_commonPrefix(e,t),s=e.substring(0,a);e=e.substring(a),t=t.substring(a),a=this.diff_commonSuffix(e,t);var u=e.substring(e.length-a);e=e.substring(0,e.length-a),t=t.substring(0,t.length-a);var l=this.diff_compute_(e,t,o,r);return s&&l.unshift([0,s]),u&&l.push([0,u]),this.diff_cleanupMerge(l),l},t.prototype.diff_compute_=function(e,t,n,i){var r;if(!e)return[[1,t]];if(!t)return[[-1,e]];var o=e.length>t.length?e:t,a=e.length>t.length?t:e,s=o.indexOf(a);if(-1!=s)return r=[[1,o.substring(0,s)],[0,a],[1,o.substring(s+a.length)]],e.length>t.length&&(r[0][0]=r[2][0]=-1),r;if(1==a.length)return[[-1,e],[1,t]];var u=this.diff_halfMatch_(e,t);if(u){var l=u[0],f=u[1],c=u[2],h=u[3],d=u[4],p=this.diff_main(l,c,n,i),v=this.diff_main(f,h,n,i);return p.concat([[0,d]],v)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,i):this.diff_bisect_(e,t,i)},t.prototype.diff_lineMode_=function(e,t,n){var i=this.diff_linesToChars_(e,t);e=i.chars1,t=i.chars2;var r=i.lineArray,o=this.diff_main(e,t,!1,n);this.diff_charsToLines_(o,r),this.diff_cleanupSemantic(o),o.push([0,""]);for(var a=0,s=0,u=0,l="",f="";a<o.length;){switch(o[a][0]){case 1:u++,f+=o[a][1];break;case-1:s++,l+=o[a][1];break;case 0:if(s>=1&&u>=1){o.splice(a-s-u,s+u),a=a-s-u;for(var i=this.diff_main(l,f,!1,n),c=i.length-1;c>=0;c--)o.splice(a,0,i[c]);a+=i.length}u=0,s=0,l="",f=""}a++}return o.pop(),o},t.prototype.diff_bisect_=function(e,t,n){for(var i=e.length,r=t.length,o=Math.ceil((i+r)/2),a=o,s=2*o,u=new Array(s),l=new Array(s),f=0;f<s;f++)u[f]=-1,l[f]=-1;u[a+1]=0,l[a+1]=0;for(var c=i-r,h=c%2!=0,d=0,p=0,v=0,g=0,y=0;y<o&&!((new Date).getTime()>n);y++){for(var m=-y+d;m<=y-p;m+=2){for(var b=a+m,k=(A=m==-y||m!=y&&u[b-1]<u[b+1]?u[b+1]:u[b-1]+1)-m;A<i&&k<r&&e.charAt(A)==t.charAt(k);)A++,k++;if(u[b]=A,A>i)p+=2;else if(k>r)d+=2;else if(h){var x=a+c-m;if(x>=0&&x<s&&-1!=l[x]){var _=i-l[x];if(A>=_)return this.diff_bisectSplit_(e,t,A,k,n)}}}for(var w=-y+v;w<=y-g;w+=2){for(var x=a+w,j=(_=w==-y||w!=y&&l[x-1]<l[x+1]?l[x+1]:l[x-1]+1)-w;_<i&&j<r&&e.charAt(i-_-1)==t.charAt(r-j-1);)_++,j++;if(l[x]=_,_>i)g+=2;else if(j>r)v+=2;else if(!h){var b=a+c-w;if(b>=0&&b<s&&-1!=u[b]){var A=u[b],k=a+A-b;if(A>=(_=i-_))return this.diff_bisectSplit_(e,t,A,k,n)}}}}return[[-1,e],[1,t]]},t.prototype.diff_bisectSplit_=function(e,t,n,i,r){var o=e.substring(0,n),a=t.substring(0,i),s=e.substring(n),u=t.substring(i),l=this.diff_main(o,a,!1,r),f=this.diff_main(s,u,!1,r);return l.concat(f)},t.prototype.diff_linesToChars_=function(e,t){var n=[],i={};function r(e){for(var t="",r=0,o=-1,a=n.length;o<e.length-1;){-1==(o=e.indexOf("\n",r))&&(o=e.length-1);var s=e.substring(r,o+1);r=o+1,(i.hasOwnProperty?i.hasOwnProperty(s):void 0!==i[s])?t+=String.fromCharCode(i[s]):(t+=String.fromCharCode(a),i[s]=a,n[a++]=s)}return t}n[0]="";var o=r(e),a=r(t);return{chars1:o,chars2:a,lineArray:n}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],r=[],o=0;o<i.length;o++)r[o]=t[i.charCodeAt(o)];e[n][1]=r.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,o=0;n<r;)e.substring(o,r)==t.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,o=0;n<r;)e.substring(e.length-r,e.length-o)==t.substring(t.length-r,t.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var r=Math.min(n,i);if(e==t)return r;for(var o=0,a=1;;){var s=e.substring(r-a),u=t.indexOf(s);if(-1==u)return o;a+=u,0!=u&&e.substring(r-a)!=t.substring(0,a)||(o=a,a++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;var r=this;function o(e,t,n){for(var i,o,a,s,u=e.substring(n,n+Math.floor(e.length/4)),l=-1,f="";-1!=(l=t.indexOf(u,l+1));){var c=r.diff_commonPrefix(e.substring(n),t.substring(l)),h=r.diff_commonSuffix(e.substring(0,n),t.substring(0,l));f.length<h+c&&(f=t.substring(l-h,l)+t.substring(l,l+c),i=e.substring(0,n-h),o=e.substring(n+c),a=t.substring(0,l-h),s=t.substring(l+c))}return 2*f.length>=e.length?[i,o,a,s,f]:null}var a,s,u,l,f,c=o(n,i,Math.ceil(n.length/4)),h=o(n,i,Math.ceil(n.length/2));if(!c&&!h)return null;a=h?c&&c[4].length>h[4].length?c:h:c,e.length>t.length?(s=a[0],u=a[1],l=a[2],f=a[3]):(l=a[0],f=a[1],s=a[2],u=a[3]);var d=a[4];return[s,u,l,f,d]},t.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],i=0,r=null,o=0,a=0,s=0,u=0,l=0;o<e.length;)0==e[o][0]?(n[i++]=o,a=u,s=l,u=0,l=0,r=e[o][1]):(1==e[o][0]?u+=e[o][1].length:l+=e[o][1].length,r&&r.length<=Math.max(a,s)&&r.length<=Math.max(u,l)&&(e.splice(n[i-1],0,[-1,r]),e[n[i-1]+1][0]=1,i--,o=--i>0?n[i-1]:-1,a=0,s=0,u=0,l=0,r=null,t=!0)),o++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;){if(-1==e[o-1][0]&&1==e[o][0]){var f=e[o-1][1],c=e[o][1],h=this.diff_commonOverlap_(f,c),d=this.diff_commonOverlap_(c,f);h>=d?(h>=f.length/2||h>=c.length/2)&&(e.splice(o,0,[0,c.substring(0,h)]),e[o-1][1]=f.substring(0,f.length-h),e[o+1][1]=c.substring(h),o++):(d>=f.length/2||d>=c.length/2)&&(e.splice(o,0,[0,f.substring(0,d)]),e[o-1][0]=1,e[o-1][1]=c.substring(0,c.length-d),e[o+1][0]=-1,e[o+1][1]=f.substring(d),o++),o++}o++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var i=e.charAt(e.length-1),r=n.charAt(0),o=i.match(t.nonAlphaNumericRegex_),a=r.match(t.nonAlphaNumericRegex_),s=o&&i.match(t.whitespaceRegex_),u=a&&r.match(t.whitespaceRegex_),l=s&&i.match(t.linebreakRegex_),f=u&&r.match(t.linebreakRegex_),c=l&&e.match(t.blanklineEndRegex_),h=f&&n.match(t.blanklineStartRegex_);return c||h?5:l||f?4:o&&!s&&u?3:s||u?2:o||a?1:0}for(var i=1;i<e.length-1;){if(0==e[i-1][0]&&0==e[i+1][0]){var r=e[i-1][1],o=e[i][1],a=e[i+1][1],s=this.diff_commonSuffix(r,o);if(s){var u=o.substring(o.length-s);r=r.substring(0,r.length-s),o=u+o.substring(0,o.length-s),a=u+a}for(var l=r,f=o,c=a,h=n(r,o)+n(o,a);o.charAt(0)===a.charAt(0);){r+=o.charAt(0),o=o.substring(1)+a.charAt(0),a=a.substring(1);var d=n(r,o)+n(o,a);d>=h&&(h=d,l=r,f=o,c=a)}e[i-1][1]!=l&&(l?e[i-1][1]=l:(e.splice(i-1,1),i--),e[i][1]=f,c?e[i+1][1]=c:(e.splice(i+1,1),i--))}i++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],i=0,r=null,o=0,a=!1,s=!1,u=!1,l=!1;o<e.length;)0==e[o][0]?(e[o][1].length<this.Diff_EditCost&&(u||l)?(n[i++]=o,a=u,s=l,r=e[o][1]):(i=0,r=null),u=l=!1):(-1==e[o][0]?l=!0:u=!0,r&&(a&&s&&u&&l||r.length<this.Diff_EditCost/2&&a+s+u+l==3)&&(e.splice(n[i-1],0,[-1,r]),e[n[i-1]+1][0]=1,i--,r=null,a&&s?(u=l=!0,i=0):(o=--i>0?n[i-1]:-1,u=l=!1),t=!0)),o++;t&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([0,""]);for(var t,n=0,i=0,r=0,o="",a="";n<e.length;)switch(e[n][0]){case 1:r++,a+=e[n][1],n++;break;case-1:i++,o+=e[n][1],n++;break;case 0:i+r>1?(0!==i&&0!==r&&(0!==(t=this.diff_commonPrefix(a,o))&&(n-i-r>0&&0==e[n-i-r-1][0]?e[n-i-r-1][1]+=a.substring(0,t):(e.splice(0,0,[0,a.substring(0,t)]),n++),a=a.substring(t),o=o.substring(t)),0!==(t=this.diff_commonSuffix(a,o))&&(e[n][1]=a.substring(a.length-t)+e[n][1],a=a.substring(0,a.length-t),o=o.substring(0,o.length-t))),0===i?e.splice(n-r,i+r,[1,a]):0===r?e.splice(n-i,i+r,[-1,o]):e.splice(n-i-r,i+r,[-1,o],[1,a]),n=n-i-r+(i?1:0)+(r?1:0)+1):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,r=0,i=0,o="",a=""}""===e[e.length-1][1]&&e.pop();var s=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),s=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),s=!0)),n++;s&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var n,i=0,r=0,o=0,a=0;for(n=0;n<e.length&&(1!==e[n][0]&&(i+=e[n][1].length),-1!==e[n][0]&&(r+=e[n][1].length),!(i>t));n++)o=i,a=r;return e.length!=n&&-1===e[n][0]?a:a+(t-o)},t.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,i=/</g,r=/>/g,o=/\n/g,a=0;a<e.length;a++){var s=e[a][0],u=e[a][1],l=u.replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(o,"&para;<br>");switch(s){case 1:t[a]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case-1:t[a]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:t[a]="<span>"+l+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)-1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,n=0,i=0,r=0;r<e.length;r++){var o=e[r][0],a=e[r][1];switch(o){case 1:n+=a.length;break;case-1:i+=a.length;break;case 0:t+=Math.max(n,i),n=0,i=0}}return t+=Math.max(n,i)},t.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case-1:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,t){for(var n=[],i=0,r=0,o=t.split(/\t/g),a=0;a<o.length;a++){var s=o[a].substring(1);switch(o[a].charAt(0)){case"+":try{n[i++]=[1,decodeURI(s)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var u=parseInt(s,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+s);var l=e.substring(r,r+=u);"="==o[a].charAt(0)?n[i++]=[0,l]:n[i++]=[-1,l];break;default:if(o[a])throw new Error("Invalid diff operation in diff_fromDelta: "+o[a])}}if(r!=e.length)throw new Error("Delta length ("+r+") does not equal source text length ("+e.length+").");return n},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(t),r=this;function o(e,i){var o=e/t.length,a=Math.abs(n-i);return r.Match_Distance?o+a/r.Match_Distance:a?1:o}var a=this.Match_Threshold,s=e.indexOf(t,n);-1!=s&&(a=Math.min(o(0,s),a),-1!=(s=e.lastIndexOf(t,n+t.length))&&(a=Math.min(o(0,s),a)));var u,l,f=1<<t.length-1;s=-1;for(var c,h=t.length+e.length,d=0;d<t.length;d++){for(u=0,l=h;u<l;)o(d,n+l)<=a?u=l:h=l,l=Math.floor((h-u)/2+u);h=l;var p=Math.max(1,n-l+1),v=Math.min(n+l,e.length)+t.length,g=Array(v+2);g[v+1]=(1<<d)-1;for(var y=v;y>=p;y--){var m=i[e.charAt(y-1)];if(g[y]=0===d?(g[y+1]<<1|1)&m:(g[y+1]<<1|1)&m|(c[y+1]|c[y])<<1|1|c[y+1],g[y]&f){var b=o(d,y-1);if(b<=a){if(a=b,!((s=y-1)>n))break;p=Math.max(1,2*n-s)}}}if(o(d+1,n)>a)break;c=g}return s},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var r=t.substring(e.start2-i,e.start2);r&&e.diffs.unshift([0,r]);var o=t.substring(e.start2+e.length1,e.start2+e.length1+i);o&&e.diffs.push([0,o]),e.start1-=r.length,e.start2-=r.length,e.length1+=r.length+o.length,e.length2+=r.length+o.length}},t.prototype.patch_make=function(e,n,i){var r,o;if("string"==typeof e&&"string"==typeof n&&void 0===i)r=e,(o=this.diff_main(r,n,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&"object"==typeof e&&void 0===n&&void 0===i)o=e,r=this.diff_text1(o);else if("string"==typeof e&&n&&"object"==typeof n&&void 0===i)r=e,o=n;else{if("string"!=typeof e||"string"!=typeof n||!i||"object"!=typeof i)throw new Error("Unknown call format to patch_make.");r=e,o=i}if(0===o.length)return[];for(var a=[],s=new t.patch_obj,u=0,l=0,f=0,c=r,h=r,d=0;d<o.length;d++){var p=o[d][0],v=o[d][1];switch(u||0===p||(s.start1=l,s.start2=f),p){case 1:s.diffs[u++]=o[d],s.length2+=v.length,h=h.substring(0,f)+v+h.substring(f);break;case-1:s.length1+=v.length,s.diffs[u++]=o[d],h=h.substring(0,f)+h.substring(f+v.length);break;case 0:v.length<=2*this.Patch_Margin&&u&&o.length!=d+1?(s.diffs[u++]=o[d],s.length1+=v.length,s.length2+=v.length):v.length>=2*this.Patch_Margin&&u&&(this.patch_addContext_(s,c),a.push(s),s=new t.patch_obj,u=0,c=h,l=f)}1!==p&&(l+=v.length),-1!==p&&(f+=v.length)}return u&&(this.patch_addContext_(s,c),a.push(s)),a},t.prototype.patch_deepCopy=function(e){for(var n=[],i=0;i<e.length;i++){var r=e[i],o=new t.patch_obj;o.diffs=[];for(var a=0;a<r.diffs.length;a++)o.diffs[a]=r.diffs[a].slice();o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,n[i]=o}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var i=0,r=[],o=0;o<e.length;o++){var a,s,u=e[o].start2+i,l=this.diff_text1(e[o].diffs),f=-1;if(l.length>this.Match_MaxBits?-1!=(a=this.match_main(t,l.substring(0,this.Match_MaxBits),u))&&(-1==(f=this.match_main(t,l.substring(l.length-this.Match_MaxBits),u+l.length-this.Match_MaxBits))||a>=f)&&(a=-1):a=this.match_main(t,l,u),-1==a)r[o]=!1,i-=e[o].length2-e[o].length1;else if(r[o]=!0,i=a-u,s=-1==f?t.substring(a,a+l.length):t.substring(a,f+this.Match_MaxBits),l==s)t=t.substring(0,a)+this.diff_text2(e[o].diffs)+t.substring(a+l.length);else{var c=this.diff_main(l,s,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(c)/l.length>this.Patch_DeleteThreshold)r[o]=!1;else{this.diff_cleanupSemanticLossless(c);for(var h,d=0,p=0;p<e[o].diffs.length;p++){var v=e[o].diffs[p];0!==v[0]&&(h=this.diff_xIndex(c,d)),1===v[0]?t=t.substring(0,a+h)+v[1]+t.substring(a+h):-1===v[0]&&(t=t.substring(0,a+h)+t.substring(a+this.diff_xIndex(c,d+v[1].length))),-1!==v[0]&&(d+=v[1].length)}}}}return[t=t.substring(n.length,t.length-n.length),r]},t.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",i=1;i<=t;i++)n+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var r=e[0],o=r.diffs;if(0==o.length||0!=o[0][0])o.unshift([0,n]),r.start1-=t,r.start2-=t,r.length1+=t,r.length2+=t;else if(t>o[0][1].length){var a=t-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],r.start1-=a,r.start2-=a,r.length1+=a,r.length2+=a}if(r=e[e.length-1],0==(o=r.diffs).length||0!=o[o.length-1][0])o.push([0,n]),r.length1+=t,r.length2+=t;else if(t>o[o.length-1][1].length){var a=t-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,a),r.length1+=a,r.length2+=a}return n},t.prototype.patch_splitMax=function(e){for(var n=this.Match_MaxBits,i=0;i<e.length;i++)if(!(e[i].length1<=n)){var r=e[i];e.splice(i--,1);for(var o=r.start1,a=r.start2,s="";0!==r.diffs.length;){var u=new t.patch_obj,l=!0;for(u.start1=o-s.length,u.start2=a-s.length,""!==s&&(u.length1=u.length2=s.length,u.diffs.push([0,s]));0!==r.diffs.length&&u.length1<n-this.Patch_Margin;){var f=r.diffs[0][0],c=r.diffs[0][1];1===f?(u.length2+=c.length,a+=c.length,u.diffs.push(r.diffs.shift()),l=!1):-1===f&&1==u.diffs.length&&0==u.diffs[0][0]&&c.length>2*n?(u.length1+=c.length,o+=c.length,l=!1,u.diffs.push([f,c]),r.diffs.shift()):(c=c.substring(0,n-u.length1-this.Patch_Margin),u.length1+=c.length,o+=c.length,0===f?(u.length2+=c.length,a+=c.length):l=!1,u.diffs.push([f,c]),c==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(c.length))}s=(s=this.diff_text2(u.diffs)).substring(s.length-this.Patch_Margin);var h=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==h&&(u.length1+=h.length,u.length2+=h.length,0!==u.diffs.length&&0===u.diffs[u.diffs.length-1][0]?u.diffs[u.diffs.length-1][1]+=h:u.diffs.push([0,h])),l||e.splice(++i,0,u)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var i=e.split("\n"),r=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<i.length;){var a=i[r].match(o);if(!a)throw new Error("Invalid patch string: "+i[r]);var s=new t.patch_obj;for(n.push(s),s.start1=parseInt(a[1],10),""===a[2]?(s.start1--,s.length1=1):"0"==a[2]?s.length1=0:(s.start1--,s.length1=parseInt(a[2],10)),s.start2=parseInt(a[3],10),""===a[4]?(s.start2--,s.length2=1):"0"==a[4]?s.length2=0:(s.start2--,s.length2=parseInt(a[4],10)),r++;r<i.length;){var u=i[r].charAt(0);try{var l=decodeURI(i[r].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"==u)s.diffs.push([-1,l]);else if("+"==u)s.diffs.push([1,l]);else if(" "==u)s.diffs.push([0,l]);else{if("@"==u)break;if(""!==u)throw new Error('Invalid patch mode "'+u+'" in: '+l)}r++}}return n},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var e,t;e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,t=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var n,i=["@@ -"+e+" +"+t+" @@\n"],r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case 1:n="+";break;case-1:n="-";break;case 0:n=" "}i[r+1]=n+encodeURI(this.diffs[r][1])+"\n"}return i.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=-1,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0}),H=null,q=function(e){if(!H){var t=void 0;if("undefined"!=typeof diff_match_patch)t="function"==typeof diff_match_patch?new diff_match_patch:new diff_match_patch.diff_match_patch;else if(U)try{t=U&&new U}catch(e){t=null}if(!t){if(!e)return null;var n=new Error("text diff_match_patch library not found");throw n.diff_match_patch_not_found=!0,n}H={diff:function(e,n){return t.patch_toText(t.patch_make(e,n))},patch:function(e,n){for(var i=t.patch_apply(t.patch_fromText(n),e),r=0;r<i[1].length;r++)if(!i[1][r]){var o=new Error("text patch failed");o.textPatchFailed=!0}return i[0]}}}return H},J=function(e){if("string"===e.leftType){var t=e.options&&e.options.textDiff&&e.options.textDiff.minLength||60;if(e.left.length<t||e.right.length<t)e.setResult([e.left,e.right]).exit();else{var n=q();if(n){var i=n.diff;e.setResult([i(e.left,e.right),0,2]).exit()}else e.setResult([e.left,e.right]).exit()}}};J.filterName="texts";var z=function(e){if(!e.nested&&2===e.delta[2]){var t=q(!0).patch;e.setResult(t(e.left,e.delta[0])).exit()}};z.filterName="texts";var W=function(e){e.nested||2===e.delta[2]&&e.setResult([function(e){var t=void 0,n=void 0,i=void 0,r=void 0,o=void 0,a=null,s=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(i=e.split("\n"),t=0,n=i.length;t<n;t++){var u=(r=i[t]).slice(0,1);"@"===u?(a=s.exec(r),i[t]="@@ -"+a[3]+","+a[4]+" +"+a[1]+","+a[2]+" @@"):"+"===u?(i[t]="-"+i[t].slice(1),"+"===i[t-1].slice(0,1)&&(o=i[t],i[t]=i[t-1],i[t-1]=o)):"-"===u&&(i[t]="+"+i[t].slice(1))}return i.join("\n")}(e.delta[0]),0,2]).exit()};W.filterName="texts";var $=function(){function e(t){i(this,e),this.processor=new f(t),this.processor.pipe(new c("diff").append(_,b,F,J,w,N).shouldHaveResult()),this.processor.pipe(new c("patch").append(A,L,k,z,j,I).shouldHaveResult()),this.processor.pipe(new c("reverse").append(E,V,x,W,C,D).shouldHaveResult())}return r(e,[{key:"options",value:function(){var e;return(e=this.processor).options.apply(e,arguments)}},{key:"diff",value:function(e,t){return this.processor.process(new v(e,t))}},{key:"patch",value:function(e,t){return this.processor.process(new g(e,t))}},{key:"reverse",value:function(e){return this.processor.process(new y(e))}},{key:"unpatch",value:function(e,t){return this.patch(e,this.reverse(t))}},{key:"clone",value:function(e){return p(e)}}]),e}(),X="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},G="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},K=function(e){return"_"===e.substr(0,1)?e.slice(1):e},Q=function(e){return"_t"===e?-1:"_"===e.substr(0,1)?parseInt(e.slice(1),10):parseInt(e,10)+.1},Z=function(e,t){return Q(e)-Q(t)},Y=function(){function e(){i(this,e)}return r(e,[{key:"format",value:function(e,t){var n={};return this.prepareContext(n),this.recurse(n,e,t),this.finalize(n)}},{key:"prepareContext",value:function(e){e.buffer=[],e.out=function(){var e;(e=this.buffer).push.apply(e,arguments)}}},{key:"typeFormattterNotFound",value:function(e,t){throw new Error("cannot format delta type: "+t)}},{key:"typeFormattterErrorFormatter",value:function(e,t){return t.toString()}},{key:"finalize",value:function(e){var t=e.buffer;if(X(t))return t.join("")}},{key:"recurse",value:function(e,t,n,i,r,o,a){var s=t&&o,u=s?o.value:n;if(void 0!==t||void 0!==i){var l=this.getDeltaType(t,o),f="node"===l?"a"===t._t?"array":"object":"";void 0!==i?this.nodeBegin(e,i,r,l,f,a):this.rootBegin(e,l,f);try{(this["format_"+l]||this.typeFormattterNotFound(e,l)).call(this,e,t,u,i,r,o)}catch(n){this.typeFormattterErrorFormatter(e,n,t,u,i,r,o),"undefined"!=typeof console&&console.error&&console.error(n.stack)}void 0!==i?this.nodeEnd(e,i,r,l,f,a):this.rootEnd(e,l,f)}}},{key:"formatDeltaChildren",value:function(e,t,n){var i=this;this.forEachDeltaKey(t,n,function(r,o,a,s){i.recurse(e,t[r],n?n[o]:void 0,r,o,a,s)})}},{key:"forEachDeltaKey",value:function(e,t,n){var i=G(e),r="a"===e._t,o={},a=void 0;if(void 0!==t)for(a in t)Object.prototype.hasOwnProperty.call(t,a)&&(void 0!==e[a]||r&&void 0!==e["_"+a]||i.push(a));for(a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=e[a];X(s)&&3===s[2]&&(o[s[1].toString()]={key:a,value:t&&t[parseInt(a.substr(1))]},!1!==this.includeMoveDestinations&&void 0===t&&void 0===e[s[1]]&&i.push(s[1].toString()))}r?i.sort(Z):i.sort();for(var u=0,l=i.length;u<l;u++){var f=i[u];if(!r||"_t"!==f){var c=r?"number"==typeof f?f:parseInt(K(f),10):f,h=u===l-1;n(f,c,o[c],h)}}}},{key:"getDeltaType",value:function(e,t){if(void 0===e)return void 0!==t?"movedestination":"unchanged";if(X(e)){if(1===e.length)return"added";if(2===e.length)return"modified";if(3===e.length&&0===e[2])return"deleted";if(3===e.length&&2===e[2])return"textdiff";if(3===e.length&&3===e[2])return"moved"}else if("object"===(void 0===e?"undefined":n(e)))return"node";return"unknown"}},{key:"parseTextDiff",value:function(e){for(var t=[],n=e.split("\n@@ "),i=0,r=n.length;i<r;i++){var o=n[i],a={pieces:[]},s=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(o).slice(1);a.location={line:s[0],chr:s[1]};for(var u=o.split("\n").slice(1),l=0,f=u.length;l<f;l++){var c=u[l];if(c.length){var h={type:"context"};"+"===c.substr(0,1)?h.type="added":"-"===c.substr(0,1)&&(h.type="deleted"),h.text=c.slice(1),a.pieces.push(h)}}t.push(a)}return t}}]),e}(),ee=Object.freeze({default:Y}),te=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),r(t,[{key:"typeFormattterErrorFormatter",value:function(e,t){e.out('<pre class="jsondiffpatch-error">'+t+"</pre>")}},{key:"formatValue",value:function(e,t){e.out("<pre>"+ne(JSON.stringify(t,null,2))+"</pre>")}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,r=n.length;i<r;i++){var o=n[i];e.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+o.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+o.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var a=o.pieces,s=0,u=a.length;s<u;s++){var l=a[s];e.out('<span class="jsondiffpatch-textdiff-'+l.type+'">'+ne(decodeURI(l.text))+"</span>")}e.out("</div></li>")}e.out("</ul>")}},{key:"rootBegin",value:function(e,t,n){var i="jsondiffpatch-"+t+(n?" jsondiffpatch-child-node-type-"+n:"");e.out('<div class="jsondiffpatch-delta '+i+'">')}},{key:"rootEnd",value:function(e){e.out("</div>"+(e.hasArrows?'<script type="text/javascript">setTimeout('+ie.toString()+",10);<\/script>":""))}},{key:"nodeBegin",value:function(e,t,n,i,r){var o="jsondiffpatch-"+i+(r?" jsondiffpatch-child-node-type-"+r:"");e.out('<li class="'+o+'" data-key="'+n+'"><div class="jsondiffpatch-property-name">'+n+"</div>")}},{key:"nodeEnd",value:function(e){e.out("</li>")}},{key:"format_unchanged",value:function(e,t,n){void 0!==n&&(e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,n),e.out("</div>"))}},{key:"format_movedestination",value:function(e,t,n){void 0!==n&&(e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,n),e.out("</div>"))}},{key:"format_node",value:function(e,t,n){var i="a"===t._t?"array":"object";e.out('<ul class="jsondiffpatch-node jsondiffpatch-node-type-'+i+'">'),this.formatDeltaChildren(e,t,n),e.out("</ul>")}},{key:"format_added",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out("</div>")}},{key:"format_modified",value:function(e,t){e.out('<div class="jsondiffpatch-value jsondiffpatch-left-value">'),this.formatValue(e,t[0]),e.out('</div><div class="jsondiffpatch-value jsondiffpatch-right-value">'),this.formatValue(e,t[1]),e.out("</div>")}},{key:"format_deleted",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out("</div>")}},{key:"format_moved",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out('</div><div class="jsondiffpatch-moved-destination">'+t[1]+"</div>"),e.out('<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">\n          <svg width="30" height="60" style="position: absolute; display: none;">\n          <defs>\n              <marker id="markerArrow" markerWidth="8" markerHeight="8"\n                 refx="2" refy="4"\n                     orient="auto" markerUnits="userSpaceOnUse">\n                  <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />\n              </marker>\n          </defs>\n          <path d="M30,0 Q-10,25 26,50"\n            style="stroke: #88f; stroke-width: 2px; fill: none; stroke-opacity: 0.5; marker-end: url(#markerArrow);"\n          ></path>\n          </svg>\n      </div>'),e.hasArrows=!0}},{key:"format_textdiff",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatTextDiffString(e,t[0]),e.out("</div>")}}]),t}(Y);function ne(e){for(var t=e,n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]],i=0;i<n.length;i++)t=t.replace(n[i][0],n[i][1]);return t}var ie=function(e){var t=e||document;!function(e,t,n){for(var i=e.querySelectorAll(t),r=0,o=i.length;r<o;r++)n(i[r])}(t,".jsondiffpatch-arrow",function(e){var t=e.parentNode,n=e.children,i=e.style,r=t,o=n[0],a=o.children[1];o.style.display="none";var s=function(e){var t=e.textContent,n=e.innerText;return t||n}(r.querySelector(".jsondiffpatch-moved-destination")),u=r.parentNode,l=void 0;if(function(e,t){for(var n=e.children,i=0,r=n.length;i<r;i++)t(n[i],i)}(u,function(e){e.getAttribute("data-key")===s&&(l=e)}),l)try{var f=l.offsetTop-r.offsetTop;o.setAttribute("height",Math.abs(f)+6),i.top=-8+(f>0?0:f)+"px";var c=f>0?"M30,0 Q-10,"+Math.round(f/2)+" 26,"+(f-4):"M30,"+-f+" Q-10,"+Math.round(-f/2)+" 26,4";a.setAttribute("d",c),o.style.display=""}catch(e){}})},re=function(e,t,n){var i=t||document.body,r="jsondiffpatch-unchanged-",o={showing:r+"showing",hiding:r+"hiding",visible:r+"visible",hidden:r+"hidden"},a=i.classList;if(a){if(!n)return a.remove(o.showing),a.remove(o.hiding),a.remove(o.visible),a.remove(o.hidden),void(!1===e&&a.add(o.hidden));!1===e?(a.remove(o.showing),a.add(o.visible),setTimeout(function(){a.add(o.hiding)},10)):(a.remove(o.hiding),a.add(o.showing),a.remove(o.hidden));var s=setInterval(function(){ie(i)},100);setTimeout(function(){a.remove(o.showing),a.remove(o.hiding),!1===e?(a.add(o.hidden),a.remove(o.visible)):(a.add(o.visible),a.remove(o.hidden)),setTimeout(function(){a.remove(o.visible),clearInterval(s)},n+400)},n)}},oe=void 0,ae=Object.freeze({showUnchanged:re,hideUnchanged:function(e,t){return re(!1,e,t)},default:te,format:function(e,t){return oe||(oe=new te),oe.format(e,t)}}),se=function(e){function t(){i(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!1,e}return a(t,e),r(t,[{key:"prepareContext",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.indent=function(e){this.indentLevel=(this.indentLevel||0)+(void 0===e?1:e),this.indentPad=new Array(this.indentLevel+1).join("&nbsp;&nbsp;")},e.row=function(t,n){e.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),e.out(e.indentPad),e.out('</pre><pre style="display: inline-block">'),e.out(t),e.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),e.out(n),e.out("</div></td></tr>")}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.row("",'<pre class="jsondiffpatch-error">'+t+"</pre>")}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,r=n.length;i<r;i++){var o=n[i];e.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+o.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+o.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var a=o.pieces,s=0,u=a.length;s<u;s++){var l=a[s];e.out('<span class="jsondiffpatch-textdiff-'+l.type+'">'+l.text+"</span>")}e.out("</div></li>")}e.out("</ul>")}},{key:"rootBegin",value:function(e,t,n){e.out('<table class="jsondiffpatch-annotated-delta">'),"node"===t&&(e.row("{"),e.indent()),"array"===n&&e.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"rootEnd",value:function(e,t){"node"===t&&(e.indent(-1),e.row("}")),e.out("</table>")}},{key:"nodeBegin",value:function(e,t,n,i,r){e.row("&quot;"+t+"&quot;: {"),"node"===i&&e.indent(),"array"===r&&e.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"nodeEnd",value:function(e,t,n,i,r,o){"node"===i&&e.indent(-1),e.row("}"+(o?"":","))}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}}]),t}(Y),ue=function(e){return'<pre style="display:inline-block">&quot;'+e+"&quot;</pre>"},le={added:function(e,t,n,i){var r=" <pre>([newValue])</pre>";return void 0===i?"new value"+r:"number"==typeof i?"insert at index "+i+r:"add property "+ue(i)+r},modified:function(e,t,n,i){var r=" <pre>([previousValue, newValue])</pre>";return void 0===i?"modify value"+r:"number"==typeof i?"modify at index "+i+r:"modify property "+ue(i)+r},deleted:function(e,t,n,i){var r=" <pre>([previousValue, 0, 0])</pre>";return void 0===i?"delete value"+r:"number"==typeof i?"remove index "+i+r:"delete property "+ue(i)+r},moved:function(e,t,n,i){return'move from <span title="(position to remove at original state)">index '+i+'</span> to <span title="(position to insert at final state)">index '+e[1]+"</span>"},textdiff:function(e,t,n,i){var r=void 0===i?"":"number"==typeof i?" at index "+i:" at property "+ue(i);return"text diff"+r+', format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>'}},fe=function(e,t){var n=this.getDeltaType(t),i=le[n],r=i&&i.apply(i,Array.prototype.slice.call(arguments,1)),o=JSON.stringify(t,null,2);"textdiff"===n&&(o=o.split("\\n").join('\\n"+\n   "')),e.indent(),e.row(o,r),e.indent(-1)};se.prototype.format_added=fe,se.prototype.format_modified=fe,se.prototype.format_deleted=fe,se.prototype.format_moved=fe,se.prototype.format_textdiff=fe;var ce=void 0,he=Object.freeze({default:se,format:function(e,t){return ce||(ce=new se),ce.format(e,t)}}),de={add:"add",remove:"remove",replace:"replace",move:"move"},pe=function(e){function t(){i(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!0,e}return a(t,e),r(t,[{key:"prepareContext",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.result=[],e.path=[],e.pushCurrentOp=function(e){var t=e.op,n=e.value,i={op:t,path:this.currentPath()};void 0!==n&&(i.value=n),this.result.push(i)},e.pushMoveOp=function(e){var t=this.currentPath();this.result.push({op:de.move,from:t,path:this.toPath(e)})},e.currentPath=function(){return"/"+this.path.join("/")},e.toPath=function(e){var t=this.path.slice();return t[t.length-1]=e,"/"+t.join("/")}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.out("[ERROR] "+t)}},{key:"rootBegin",value:function(){}},{key:"rootEnd",value:function(){}},{key:"nodeBegin",value:function(e,t,n){var i=e.path;i.push(n)}},{key:"nodeEnd",value:function(e){var t=e.path;t.pop()}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}},{key:"format_added",value:function(e,t){e.pushCurrentOp({op:de.add,value:t[0]})}},{key:"format_modified",value:function(e,t){e.pushCurrentOp({op:de.replace,value:t[1]})}},{key:"format_deleted",value:function(e){e.pushCurrentOp({op:de.remove})}},{key:"format_moved",value:function(e,t){var n=t[1];e.pushMoveOp(n)}},{key:"format_textdiff",value:function(){throw new Error("Not implemented")}},{key:"format",value:function(e,t){var n={};return this.prepareContext(n),this.recurse(n,e,t),n.result}}]),t}(Y),ve=function(e){return e[e.length-1]},ge=function(e){return function(e,t){return e.sort(t),e}(e,function(e,t){var n=e.path.split("/"),i=t.path.split("/");return n.length!==i.length?n.length-i.length:function(e,t){var n=parseInt(e,10),i=parseInt(t,10);return isNaN(n)||isNaN(i)?0:i-n}(ve(n),ve(i))})},ye=function(e,t){var n=Array(t.length+1).fill().map(function(){return[]});return e.map(function(e){var n=t.map(function(t){return t(e)}).indexOf(!0);return n<0&&(n=t.length),{item:e,position:n}}).reduce(function(e,t){return e[t.position].push(t.item),e},n)},me=function(e){var t=e.op;return"move"===t},be=function(e){var t=e.op;return"remove"===t},ke=void 0,xe=function(e,t){return ke||(ke=new pe),function(e){var t=ye(e,[me,be]),n=u(t,3),i=n[0],r=n[1],o=n[2],a=ge(r);return[].concat(l(a),l(i),l(o))}(ke.format(e,t))},_e=Object.freeze({default:pe,partitionOps:ye,format:xe,log:function(e,t){console.log(xe(e,t))}});function we(e){return t&&t[e]||function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}}var je={added:we("green"),deleted:we("red"),movedestination:we("gray"),moved:we("yellow"),unchanged:we("gray"),error:we("white.bgRed"),textDiffLine:we("gray")},Ae=function(e){function t(){i(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!1,e}return a(t,e),r(t,[{key:"prepareContext",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.indent=function(e){this.indentLevel=(this.indentLevel||0)+(void 0===e?1:e),this.indentPad=new Array(this.indentLevel+1).join("  "),this.outLine()},e.outLine=function(){this.buffer.push("\n"+(this.indentPad||""))},e.out=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,r=t.length;i<r;i++){var o=t[i].split("\n"),a=o.join("\n"+(this.indentPad||""));this.color&&this.color[0]&&(a=this.color[0](a)),this.buffer.push(a)}},e.pushColor=function(e){this.color=this.color||[],this.color.unshift(e)},e.popColor=function(){this.color=this.color||[],this.color.shift()}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.pushColor(je.error),e.out("[ERROR]"+t),e.popColor()}},{key:"formatValue",value:function(e,t){e.out(JSON.stringify(t,null,2))}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.indent();for(var i=0,r=n.length;i<r;i++){var o=n[i];e.pushColor(je.textDiffLine),e.out(o.location.line+","+o.location.chr+" "),e.popColor();for(var a=o.pieces,s=0,u=a.length;s<u;s++){var l=a[s];e.pushColor(je[l.type]),e.out(l.text),e.popColor()}i<r-1&&e.outLine()}e.indent(-1)}},{key:"rootBegin",value:function(e,t,n){e.pushColor(je[t]),"node"===t&&(e.out("array"===n?"[":"{"),e.indent())}},{key:"rootEnd",value:function(e,t,n){"node"===t&&(e.indent(-1),e.out("array"===n?"]":"}")),e.popColor()}},{key:"nodeBegin",value:function(e,t,n,i,r){e.pushColor(je[i]),e.out(n+": "),"node"===i&&(e.out("array"===r?"[":"{"),e.indent())}},{key:"nodeEnd",value:function(e,t,n,i,r,o){"node"===i&&(e.indent(-1),e.out("array"===r?"]":"}"+(o?"":","))),o||e.outLine(),e.popColor()}},{key:"format_unchanged",value:function(e,t,n){void 0!==n&&this.formatValue(e,n)}},{key:"format_movedestination",value:function(e,t,n){void 0!==n&&this.formatValue(e,n)}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}},{key:"format_added",value:function(e,t){this.formatValue(e,t[0])}},{key:"format_modified",value:function(e,t){e.pushColor(je.deleted),this.formatValue(e,t[0]),e.popColor(),e.out(" => "),e.pushColor(je.added),this.formatValue(e,t[1]),e.popColor()}},{key:"format_deleted",value:function(e,t){this.formatValue(e,t[0])}},{key:"format_moved",value:function(e,t){e.out("==> "+t[1])}},{key:"format_textdiff",value:function(e,t){this.formatTextDiffString(e,t[0])}}]),t}(Y),Ce=void 0,Ee=function(e,t){return Ce||(Ce=new Ae),Ce.format(e,t)},Se=Object.freeze({default:Ae,format:Ee,log:function(e,t){console.log(Ee(e,t))}}),Re=Object.freeze({base:ee,html:ae,annotated:he,jsonpatch:_e,console:Se}),Oe=void 0;e.DiffPatcher=$,e.formatters=Re,e.console=Se,e.create=function(e){return new $(e)},e.dateReviver=function(e,t){var n=void 0;return"string"==typeof t&&(n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d*))?(Z|([+-])(\d{2}):(\d{2}))$/.exec(t))?new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6],+(n[7]||0))):t},e.diff=function(){return Oe||(Oe=new $),Oe.diff.apply(Oe,arguments)},e.patch=function(){return Oe||(Oe=new $),Oe.patch.apply(Oe,arguments)},e.unpatch=function(){return Oe||(Oe=new $),Oe.unpatch.apply(Oe,arguments)},e.reverse=function(){return Oe||(Oe=new $),Oe.reverse.apply(Oe,arguments)},e.clone=function(){return Oe||(Oe=new $),Oe.clone.apply(Oe,arguments)},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t){t.Phoenix||(t.Phoenix={}),e.exports=t.Phoenix.LiveView=n(1)}).call(this,n(5))}])});